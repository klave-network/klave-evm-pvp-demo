import{j as s,r as i,u as je,l as we,C as ne,D as $,t as P,E as H}from"./index-BywUjjZ0.js";import{c as J,S as Ne,a as Q,e as ke,u as de,h as Ce,g as F,i as Ee,f as oe,w as B,b as E,t as m,B as ie,j as G}from"./createLucideIcon-KQzBVrld.js";import{C as L,e as O}from"./card-D4Rz1kPw.js";import{c as Ae,a as Re,u as Pe,P as ze,b as R,g as ce,e as De,D as Se}from"./index-bzM2dxcA.js";import{c as me,R as Fe,A as Le,a as Oe,C as Ie,d as Me,b as w}from"./index-BmhQrHE4.js";import{L as He}from"./loader-Bvj9U2Ik.js";import{C as Be}from"./circle-check-BKWTy_KH.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Y=J("ArrowRight",Ge);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$e=J("Calendar",Ye);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],A=J("Clock",Ve),We=ke("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ue({className:t,variant:n,asChild:a=!1,...e}){const o=a?Ne:"span";return s.jsx(o,{"data-slot":"badge",className:Q(We({variant:n}),t),...e})}var[V,js]=Ae("Tooltip",[me]),W=me(),pe="TooltipProvider",qe=700,K="tooltip.open",[Xe,T]=V(pe),fe=t=>{const{__scopeTooltip:n,delayDuration:a=qe,skipDelayDuration:e=300,disableHoverableContent:o=!1,children:r}=t,[d,v]=i.useState(!0),l=i.useRef(!1),y=i.useRef(0);return i.useEffect(()=>{const c=y.current;return()=>window.clearTimeout(c)},[]),s.jsx(Xe,{scope:n,isOpenDelayed:d,delayDuration:a,onOpen:i.useCallback(()=>{window.clearTimeout(y.current),v(!1)},[]),onClose:i.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>v(!0),e)},[e]),isPointerInTransitRef:l,onPointerInTransitChange:i.useCallback(c=>{l.current=c},[]),disableHoverableContent:o,children:r})};fe.displayName=pe;var U="Tooltip",[Ke,I]=V(U),ye=t=>{const{__scopeTooltip:n,children:a,open:e,defaultOpen:o=!1,onOpenChange:r,disableHoverableContent:d,delayDuration:v}=t,l=T(U,t.__scopeTooltip),y=W(n),[c,h]=i.useState(null),x=Re(),p=i.useRef(0),_=d??l.disableHoverableContent,g=v??l.delayDuration,u=i.useRef(!1),[j=!1,b]=Pe({prop:e,defaultProp:o,onChange:S=>{S?(l.onOpen(),document.dispatchEvent(new CustomEvent(K))):l.onClose(),r==null||r(S)}}),N=i.useMemo(()=>j?u.current?"delayed-open":"instant-open":"closed",[j]),k=i.useCallback(()=>{window.clearTimeout(p.current),p.current=0,u.current=!1,b(!0)},[b]),C=i.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),D=i.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{u.current=!0,b(!0),p.current=0},g)},[g,b]);return i.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(Fe,{...y,children:s.jsx(Ke,{scope:n,contentId:x,open:j,stateAttribute:N,trigger:c,onTriggerChange:h,onTriggerEnter:i.useCallback(()=>{l.isOpenDelayed?D():k()},[l.isOpenDelayed,D,k]),onTriggerLeave:i.useCallback(()=>{_?C():(window.clearTimeout(p.current),p.current=0)},[C,_]),onOpen:k,onClose:C,disableHoverableContent:_,children:a})})};ye.displayName=U;var Z="TooltipTrigger",he=i.forwardRef((t,n)=>{const{__scopeTooltip:a,...e}=t,o=I(Z,a),r=T(Z,a),d=W(a),v=i.useRef(null),l=de(n,v,o.onTriggerChange),y=i.useRef(!1),c=i.useRef(!1),h=i.useCallback(()=>y.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(Le,{asChild:!0,...d,children:s.jsx(ze.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...e,ref:l,onPointerMove:R(t.onPointerMove,x=>{x.pointerType!=="touch"&&!c.current&&!r.isPointerInTransitRef.current&&(o.onTriggerEnter(),c.current=!0)}),onPointerLeave:R(t.onPointerLeave,()=>{o.onTriggerLeave(),c.current=!1}),onPointerDown:R(t.onPointerDown,()=>{y.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:R(t.onFocus,()=>{y.current||o.onOpen()}),onBlur:R(t.onBlur,o.onClose),onClick:R(t.onClick,o.onClose)})})});he.displayName=Z;var ee="TooltipPortal",[Ze,Je]=V(ee,{forceMount:void 0}),ve=t=>{const{__scopeTooltip:n,forceMount:a,children:e,container:o}=t,r=I(ee,n);return s.jsx(Ze,{scope:n,forceMount:a,children:s.jsx(ce,{present:a||r.open,children:s.jsx(De,{asChild:!0,container:o,children:e})})})};ve.displayName=ee;var z="TooltipContent",_e=i.forwardRef((t,n)=>{const a=Je(z,t.__scopeTooltip),{forceMount:e=a.forceMount,side:o="top",...r}=t,d=I(z,t.__scopeTooltip);return s.jsx(ce,{present:e||d.open,children:d.disableHoverableContent?s.jsx(xe,{side:o,...r,ref:n}):s.jsx(Qe,{side:o,...r,ref:n})})}),Qe=i.forwardRef((t,n)=>{const a=I(z,t.__scopeTooltip),e=T(z,t.__scopeTooltip),o=i.useRef(null),r=de(n,o),[d,v]=i.useState(null),{trigger:l,onClose:y}=a,c=o.current,{onPointerInTransitChange:h}=e,x=i.useCallback(()=>{v(null),h(!1)},[h]),p=i.useCallback((_,g)=>{const u=_.currentTarget,j={x:_.clientX,y:_.clientY},b=ss(j,u.getBoundingClientRect()),N=ts(j,b),k=as(g.getBoundingClientRect()),C=os([...N,...k]);v(C),h(!0)},[h]);return i.useEffect(()=>()=>x(),[x]),i.useEffect(()=>{if(l&&c){const _=u=>p(u,c),g=u=>p(u,l);return l.addEventListener("pointerleave",_),c.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",_),c.removeEventListener("pointerleave",g)}}},[l,c,p,x]),i.useEffect(()=>{if(d){const _=g=>{const u=g.target,j={x:g.clientX,y:g.clientY},b=(l==null?void 0:l.contains(u))||(c==null?void 0:c.contains(u)),N=!ns(j,d);b?x():N&&(x(),y())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,c,d,y,x]),s.jsx(xe,{...t,ref:r})}),[Te,es]=V(U,{isInside:!1}),xe=i.forwardRef((t,n)=>{const{__scopeTooltip:a,children:e,"aria-label":o,onEscapeKeyDown:r,onPointerDownOutside:d,...v}=t,l=I(z,a),y=W(a),{onClose:c}=l;return i.useEffect(()=>(document.addEventListener(K,c),()=>document.removeEventListener(K,c)),[c]),i.useEffect(()=>{if(l.trigger){const h=x=>{const p=x.target;p!=null&&p.contains(l.trigger)&&c()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,c]),s.jsx(Se,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:d,onFocusOutside:h=>h.preventDefault(),onDismiss:c,children:s.jsxs(Ie,{"data-state":l.stateAttribute,...y,...v,ref:n,style:{...v.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(Ce,{children:e}),s.jsx(Te,{scope:a,isInside:!0,children:s.jsx(Me,{id:l.contentId,role:"tooltip",children:o||e})})]})})});_e.displayName=z;var ue="TooltipArrow",ge=i.forwardRef((t,n)=>{const{__scopeTooltip:a,...e}=t,o=W(a);return es(ue,a).isInside?null:s.jsx(Oe,{...o,...e,ref:n})});ge.displayName=ue;function ss(t,n){const a=Math.abs(n.top-t.y),e=Math.abs(n.bottom-t.y),o=Math.abs(n.right-t.x),r=Math.abs(n.left-t.x);switch(Math.min(a,e,o,r)){case r:return"left";case o:return"right";case a:return"top";case e:return"bottom";default:throw new Error("unreachable")}}function ts(t,n,a=5){const e=[];switch(n){case"top":e.push({x:t.x-a,y:t.y+a},{x:t.x+a,y:t.y+a});break;case"bottom":e.push({x:t.x-a,y:t.y-a},{x:t.x+a,y:t.y-a});break;case"left":e.push({x:t.x+a,y:t.y-a},{x:t.x+a,y:t.y+a});break;case"right":e.push({x:t.x-a,y:t.y-a},{x:t.x-a,y:t.y+a});break}return e}function as(t){const{top:n,right:a,bottom:e,left:o}=t;return[{x:o,y:n},{x:a,y:n},{x:a,y:e},{x:o,y:e}]}function ns(t,n){const{x:a,y:e}=t;let o=!1;for(let r=0,d=n.length-1;r<n.length;d=r++){const v=n[r].x,l=n[r].y,y=n[d].x,c=n[d].y;l>e!=c>e&&a<(y-v)*(e-l)/(c-l)+v&&(o=!o)}return o}function os(t){const n=t.slice();return n.sort((a,e)=>a.x<e.x?-1:a.x>e.x?1:a.y<e.y?-1:a.y>e.y?1:0),is(n)}function is(t){if(t.length<=1)return t.slice();const n=[];for(let e=0;e<t.length;e++){const o=t[e];for(;n.length>=2;){const r=n[n.length-1],d=n[n.length-2];if((r.x-d.x)*(o.y-d.y)>=(r.y-d.y)*(o.x-d.x))n.pop();else break}n.push(o)}n.pop();const a=[];for(let e=t.length-1;e>=0;e--){const o=t[e];for(;a.length>=2;){const r=a[a.length-1],d=a[a.length-2];if((r.x-d.x)*(o.y-d.y)>=(r.y-d.y)*(o.x-d.x))a.pop();else break}a.push(o)}return a.pop(),n.length===1&&a.length===1&&n[0].x===a[0].x&&n[0].y===a[0].y?n:n.concat(a)}var rs=fe,ls=ye,ds=he,cs=ve,ms=_e,ps=ge;function be({delayDuration:t=0,...n}){return s.jsx(rs,{"data-slot":"tooltip-provider",delayDuration:t,...n})}function re({...t}){return s.jsx(be,{children:s.jsx(ls,{"data-slot":"tooltip",...t})})}function le({...t}){return s.jsx(ds,{"data-slot":"tooltip-trigger",...t})}function X({className:t,sideOffset:n=0,children:a,...e}){return s.jsx(cs,{children:s.jsxs(ms,{"data-slot":"tooltip-content",sideOffset:n,className:Q("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",t),...e,children:[a,s.jsx(ps,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const fs=15e3,ys=async(t,n,a)=>{try{a==="AwaitingSourceReceiveFinalized"?await H(t.id,t.payment_vs_payment.network_transactions[0].tx_hash):a==="AwaitingDestinationReceiveFinalized"?(await H(t.id,t.payment_vs_payment.network_transactions[1].tx_hash),await $(t.id,"0x5245b7b603f885b1d92255137ccf79edfeef4e59902e2045df76a57b075c72dc",t.payment_vs_payment.source.network_name,t.payment_vs_payment.destination.address,t.payment_vs_payment.source.amount,t.escrow_address)):a==="AwaitingDestinationSendFinalized"?(await H(t.id,t.payment_vs_payment.network_transactions[2].tx_hash),await $(t.id,"0x3a5c1e3b7f8d9a4c2e1b5f8e2c3d4e1f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0",t.payment_vs_payment.destination.network_name,t.payment_vs_payment.source.address,t.payment_vs_payment.destination.amount,t.escrow_address)):a==="AwaitingSourceSendFinalized"&&await H(t.id,t.payment_vs_payment.network_transactions[3].tx_hash),await n.invalidate(),P.success("Transaction finalized automatically")}catch(e){P.error("Failed to auto-finalize transaction",{description:e instanceof Error?e.message:String(e)})}},ws=function(){var y,c,h,x,p,_,g,u,j,b,N,k,C,D,S,se,te,ae;const n=je(),a=we(),{currentTx:e,currentWalletAddress:o}=ne.useLoaderData(),{isFetching:r}=ne.useMatch(),d=F(((y=e==null?void 0:e.payment_vs_payment)==null?void 0:y.state_machine)??"");console.log(e==null?void 0:e.payment_vs_payment.state_machine),console.log(o),console.log(e==null?void 0:e.payment_vs_payment.destination.address),i.useEffect(()=>{if(!a||!e)return;const f=e.payment_vs_payment.state_machine;if(["AwaitingSourceReceiveFinalized","AwaitingDestinationReceiveFinalized","AwaitingDestinationSendFinalized","AwaitingSourceSendFinalized"].includes(f)){const M=setTimeout(()=>{ys(e,n,f)},fs);return()=>clearTimeout(M)}},[e==null?void 0:e.payment_vs_payment.state_machine,a]);const{sourceBalance:v,destinationBalance:l}=Ee(((c=e==null?void 0:e.payment_vs_payment)==null?void 0:c.state_machine)??"",((x=(h=e==null?void 0:e.payment_vs_payment)==null?void 0:h.source)==null?void 0:x.amount)??"0",((_=(p=e==null?void 0:e.payment_vs_payment)==null?void 0:p.destination)==null?void 0:_.amount)??"0");return s.jsx(be,{children:s.jsxs("div",{className:"flex flex-col gap-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["Transaction Details",s.jsx(Ue,{variant:d.status==="completed"?"default":d.status==="pending"?"outline":"destructive",children:d.label})]}),s.jsxs("p",{className:"text-muted-foreground flex items-center mt-1",children:[s.jsx($e,{className:"mr-1 h-4 w-4"}),oe((e==null?void 0:e.timestamp)??"")]})]}),a&&s.jsxs("span",{className:"font-mono bg-gray-200 text-gray-600 p-1 rounded border border-border",children:["ESCROW ADDRESS: ",(e==null?void 0:e.escrow_address)??""]})]}),r?s.jsx(He,{className:"animate-spin size-4"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a?s.jsxs(s.Fragment,{children:[s.jsx(L,{className:"bg-purple-50",children:s.jsxs(O,{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-2 mb-4",children:s.jsx("h3",{className:"text-lg font-medium",children:"Escrow Ethereum Sepolia"})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"text-3xl font-bold",children:B(v)}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:E((e==null?void 0:e.payment_vs_payment.source.network_name)??"")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"From Address"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:[m((e==null?void 0:e.payment_vs_payment.source.address)??""),o===(e==null?void 0:e.payment_vs_payment.source.address)?" (Your Wallet)":""]}),s.jsx("p",{className:"flex items-center text-sm text-muted-foreground",children:e!=null&&e.payment_vs_payment.network_transactions[0]?s.jsxs(s.Fragment,{children:[m(e==null?void 0:e.payment_vs_payment.network_transactions[0].tx_hash),((u=(g=e==null?void 0:e.payment_vs_payment)==null?void 0:g.network_transactions[0])==null?void 0:u.state)==="Complete"?s.jsx(w,{className:"size-4 ml-1"}):s.jsx(A,{className:"size-4 ml-1"})]}):""})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"To Address"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:[m((e==null?void 0:e.payment_vs_payment.destination.address)??""),o===(e==null?void 0:e.payment_vs_payment.destination.address)?" (Your Wallet)":""]}),s.jsx("p",{className:"flex items-center text-sm text-muted-foreground",children:e!=null&&e.payment_vs_payment.network_transactions[2]?s.jsxs(s.Fragment,{children:[m(e==null?void 0:e.payment_vs_payment.network_transactions[2].tx_hash),((b=(j=e==null?void 0:e.payment_vs_payment)==null?void 0:j.network_transactions[2])==null?void 0:b.state)==="Complete"?s.jsx(w,{className:"size-4 ml-1"}):s.jsx(A,{className:"size-4 ml-1"})]}):""})]})]})]})]})}),s.jsx(L,{className:"bg-green-50",children:s.jsxs(O,{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-2 mb-4",children:s.jsx("h3",{className:"text-lg font-medium",children:"Escrow Hyperledger Besu"})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"text-3xl font-bold",children:B(l)}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:E((e==null?void 0:e.payment_vs_payment.destination.network_name)??"")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"From Address"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:[m((e==null?void 0:e.payment_vs_payment.destination.address)??""),o===(e==null?void 0:e.payment_vs_payment.destination.address)?" (Your Wallet)":""]}),s.jsx("p",{className:"flex items-center text-sm text-muted-foreground",children:e!=null&&e.payment_vs_payment.network_transactions[1]?s.jsxs(s.Fragment,{children:[m(e==null?void 0:e.payment_vs_payment.network_transactions[1].tx_hash),((k=(N=e==null?void 0:e.payment_vs_payment)==null?void 0:N.network_transactions[1])==null?void 0:k.state)==="Complete"?s.jsx(w,{className:"size-4 ml-1"}):s.jsx(A,{className:"size-4 ml-1"})]}):""})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"To Address"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:[m((e==null?void 0:e.payment_vs_payment.source.address)??""),o===(e==null?void 0:e.payment_vs_payment.source.address)?" (Your Wallet)":""]}),s.jsx("p",{className:"flex items-center text-sm text-muted-foreground",children:e!=null&&e.payment_vs_payment.network_transactions[3]?s.jsxs(s.Fragment,{children:[m(e==null?void 0:e.payment_vs_payment.network_transactions[3].tx_hash),((D=(C=e==null?void 0:e.payment_vs_payment)==null?void 0:C.network_transactions[3])==null?void 0:D.state)==="Complete"?s.jsx(w,{className:"size-4 ml-1"}):s.jsx(A,{className:"size-4 ml-1"})]}):""})]})]})]})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(L,{className:"bg-purple-50",children:s.jsxs(O,{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-2 mb-4",children:s.jsx("h3",{className:"text-lg font-medium",children:"Ethereum Sepolia"})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"text-3xl font-bold",children:B((e==null?void 0:e.payment_vs_payment.source.amount)??"")}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:E((e==null?void 0:e.payment_vs_payment.source.network_name)??"")})]}),s.jsx("div",{className:"space-y-4 mb-6",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:o===(e==null?void 0:e.payment_vs_payment.destination.address)?"From Address":"To Address"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-medium",children:o===(e==null?void 0:e.payment_vs_payment.destination.address)?m((e==null?void 0:e.payment_vs_payment.source.address)??""):m((e==null?void 0:e.payment_vs_payment.destination.address)??"")}),s.jsx("p",{className:"flex items-center text-sm text-muted-foreground",children:e!=null&&e.payment_vs_payment.network_transactions[0]?s.jsxs(s.Fragment,{children:[m(e==null?void 0:e.payment_vs_payment.network_transactions[0].tx_hash),((se=(S=e==null?void 0:e.payment_vs_payment)==null?void 0:S.network_transactions[0])==null?void 0:se.state)==="Complete"?s.jsx(w,{className:"size-4 ml-1"}):s.jsx(A,{className:"size-4 ml-1"})]}):""})]})]})}),(e==null?void 0:e.payment_vs_payment.state_machine)==="AwaitingSourceReceive"&&o===(e==null?void 0:e.payment_vs_payment.source.address)?s.jsxs(ie,{className:"hover:cursor-pointer",disabled:!!r,onClick:async()=>{try{await $(e.id,"0x4cf23abb8ae079b7eb900a32a15c9521160c44462a80525ebe468ed0e2540e28",e.payment_vs_payment.source.network_name,e.payment_vs_payment.source.address,e.payment_vs_payment.source.amount,e.escrow_address),await n.invalidate(),P.success("Transfer validated successfully")}catch(f){P.error("Failed to validate transfer",{description:f instanceof Error?f.message:String(f)})}},children:[s.jsx(w,{className:"mr-1 size-4"})," ","Approve"]}):null]})}),s.jsx(L,{className:"bg-green-50",children:s.jsxs(O,{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-2 mb-4",children:s.jsx("h3",{className:"text-lg font-medium",children:"Hyperledger Besu"})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"text-3xl font-bold",children:B((e==null?void 0:e.payment_vs_payment.destination.amount)??"")}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:E((e==null?void 0:e.payment_vs_payment.destination.network_name)??"")})]}),s.jsx("div",{className:"space-y-4 mb-6",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:o===(e==null?void 0:e.payment_vs_payment.destination.address)?"To Address":"From Address"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-medium",children:o===(e==null?void 0:e.payment_vs_payment.destination.address)?m((e==null?void 0:e.payment_vs_payment.source.address)??""):m((e==null?void 0:e.payment_vs_payment.destination.address)??"")}),s.jsx("p",{className:"flex items-center text-sm text-muted-foreground",children:e!=null&&e.payment_vs_payment.network_transactions[1]?s.jsxs(s.Fragment,{children:[m(e==null?void 0:e.payment_vs_payment.network_transactions[1].tx_hash),((ae=(te=e==null?void 0:e.payment_vs_payment)==null?void 0:te.network_transactions[1])==null?void 0:ae.state)==="Complete"?s.jsx(w,{className:"size-4 ml-1"}):s.jsx(A,{className:"size-4 ml-1"})]}):""})]})]})}),(e==null?void 0:e.payment_vs_payment.state_machine)==="AwaitingDestinationReceive"&&o===(e==null?void 0:e.payment_vs_payment.destination.address)?s.jsxs(ie,{className:"hover:cursor-pointer",disabled:!!r,onClick:async()=>{try{await $(e.id,"0x4cf23abb8ae079b7eb900a32a15c9521160c44462a80525ebe468ed0e2540e28",e.payment_vs_payment.destination.network_name,e.payment_vs_payment.destination.address,e.payment_vs_payment.destination.amount,e.escrow_address),await n.invalidate(),P.success("Transfer validated successfully")}catch(f){P.error("Failed to validate transfer",{description:f instanceof Error?f.message:String(f)})}},children:[s.jsx(w,{className:"mr-1 size-4"})," ","Approve"]}):null]})})]})}),s.jsx(L,{children:s.jsxs(O,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Transaction Status"}),s.jsx("div",{className:"relative",children:[{title:s.jsxs("span",{className:"flex items-center gap-2",children:["Locking assets:"," ",m((e==null?void 0:e.payment_vs_payment.source.address)??""),s.jsx(Y,{className:"size-4"}),E((e==null?void 0:e.payment_vs_payment.source.network_name)??"")," ","Escrow"]}),networkTx:e==null?void 0:e.payment_vs_payment.network_transactions[0],index:0},{title:s.jsxs("span",{className:"flex items-center gap-2",children:["Locking assets:"," ",m((e==null?void 0:e.payment_vs_payment.destination.address)??""),s.jsx(Y,{className:"size-4"}),E((e==null?void 0:e.payment_vs_payment.destination.network_name)??"")," ","Escrow"]}),networkTx:e==null?void 0:e.payment_vs_payment.network_transactions[1],index:1},{title:s.jsxs("span",{className:"flex items-center gap-2",children:["Unlocking assets:"," ",E((e==null?void 0:e.payment_vs_payment.destination.network_name)??"")," ","Escrow",s.jsx(Y,{className:"size-4"}),m((e==null?void 0:e.payment_vs_payment.destination.address)??"")]}),networkTx:e==null?void 0:e.payment_vs_payment.network_transactions[2],index:2},{title:s.jsxs("span",{className:"flex items-center gap-2",children:["Unlocking assets:"," ",E((e==null?void 0:e.payment_vs_payment.source.network_name)??"")," ","Escrow",s.jsx(Y,{className:"size-4"}),m((e==null?void 0:e.payment_vs_payment.source.address)??"")]}),networkTx:e==null?void 0:e.payment_vs_payment.network_transactions[3],index:3}].map((f,q)=>{var M;return s.jsxs("div",{className:"flex justify-between mb-6 last:mb-0",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"mr-4 relative",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${f.networkTx?F(f.networkTx.state).status==="completed"?"bg-green-100 text-green-600":F(f.networkTx.state).status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-600":"bg-gray-100 text-gray-400"}`,children:f.networkTx?F(f.networkTx.state).status==="completed"?s.jsx(w,{className:"size-4"}):s.jsx(A,{className:"size-4"}):s.jsx(A,{className:"size-4"})}),q<3&&s.jsx("div",{className:"absolute top-8 bottom-0 left-4 w-0.5 -ml-px bg-gray-200"})]}),s.jsxs("div",{children:[s.jsx("div",{className:Q("font-medium space-x-2",!f.networkTx&&"italic text-gray-500"),children:f.title}),f.networkTx&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[oe((e==null?void 0:e.timestamp)??"")," ","â€¢"," ",m(f.networkTx.tx_hash)]})]})]}),s.jsx("div",{className:"flex gap-2 items-center",children:F(((M=f.networkTx)==null?void 0:M.state)??"").status==="completed"?s.jsxs(re,{children:[s.jsx(le,{children:s.jsx(Be,{className:"rounded-full size-6 bg-green-600 text-white"})}),s.jsxs(X,{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"font-bold",children:"latest_finalized_block"}),s.jsx("span",{children:m("0x5245b7b603f885b1d92255137ccf79edfeef4e59902e2045df76a57b075c72dc")})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"font-bold",children:"sync_committee"}),s.jsxs("span",{children:["pubkeys:"," ",G(15,189)]}),s.jsxs("span",{children:["aggregate_pubkey:"," ",m("0x3a5c1e3b7f8d9a4c2e1b5f8e2c3d4e1f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0")]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"font-bold",children:"next_sync_committee"}),s.jsxs("span",{children:["pubkeys:"," ",G(15,189)]}),s.jsxs("span",{children:["aggregate_pubkey:"," ",m("0x4b7c2d3f9e8a1b5c0f2e3d4c5b6a7e8f9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4")]})]})]})]}):f.networkTx&&s.jsx(s.Fragment,{children:s.jsxs(re,{children:[s.jsx(le,{children:s.jsx("i",{children:"Validating block..."})}),s.jsx(X,{className:"flex flex-col gap-4",children:s.jsxs(X,{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"font-bold",children:"latest_finalized_block"}),s.jsx("span",{children:m("0x5245b7b603f885b1d92255137ccf79edfeef4e59902e2045df76a57b075c72dc")})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"font-bold",children:"sync_committee"}),s.jsxs("span",{children:["pubkeys:"," ",G(15,189)]}),s.jsxs("span",{children:["aggregate_pubkey:"," ",m("0x3a5c1e3b7f8d9a4c2e1b5f8e2c3d4e1f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0")]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"font-bold",children:"next_sync_committee"}),s.jsxs("span",{children:["pubkeys:"," ",G(15,189)]}),s.jsxs("span",{children:["aggregate_pubkey:"," ",m("0x4b7c2d3f9e8a1b5c0f2e3d4c5b6a7e8f9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4")]})]})]})})]})})})]},q)})})]})})]})]})})};export{ws as component};
